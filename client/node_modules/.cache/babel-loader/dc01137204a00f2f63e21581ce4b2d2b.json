{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _ from'lodash';import React,{Component}from'react';import{Search,Form,Grid,Header,Segment,Container,List}from'semantic-ui-react';var currentValueInsideField='';var SearchApp=/*#__PURE__*/function(_Component){_inherits(SearchApp,_Component);var _super=_createSuper(SearchApp);function SearchApp(props){var _this;_classCallCheck(this,SearchApp);_this=_super.call(this,props);_this.handleKeyPress=function(event){if(event.key==='Enter'){console.log(currentValueInsideField);localStorage.setItem('searchQuery',currentValueInsideField);//this.state.previousQuery = currentValueInsideField;\n_this.props.searchQueryProp(currentValueInsideField);}};_this.handleSearchChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,_ref){var value,response,data,resultsRaw,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=_ref.value;//To handle enter key press\ncurrentValueInsideField=value;_context.prev=2;_context.next=5;return fetch(\"https://api.cognitive.microsoft.com/bing/v7.0/suggestions?mkt=fr-FR&q=\".concat(value),{headers:{\"Ocp-Apim-Subscription-Key\":\"d901d64eeb334505825c20a547b760ba\"}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;resultsRaw=data.suggestionGroups[0].searchSuggestions;results=resultsRaw.map(function(result){return{title:result.displayText,url:result.url};});_this.setState({results:results});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.error(\"Error fetching search \".concat(value));case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.handleResultSelect=function(e,_ref3){var result=_ref3.result;_this.setState({selectedResult:result});_this.state.selectedResult=result;e.preventDefault();localStorage.setItem('searchQuery',result.title);//console.log(result.title);\n//this.state.previousQuery = result.title;\n_this.props.searchQueryProp(result.title);};_this.state={results:['null'],selectedResult:null,previousQuery:null};//console.log(localStorage.getItem('isThisSearchPage'));\n//Retrieving the previous search query state from Storage\n//console.log(window.location.href);\n//var entireurl = window.location.href;\n//var array = entireurl.split('?');\n//if (array[0] === 'http://localhost:3000/search') {\nvar retrievedPrevQueryObject=localStorage.getItem('searchQuery');if(retrievedPrevQueryObject==null){//console.log('Detected null');\n_this.state.previousQuery=null;}else{//console.log('Detected ' + (retrievedSwitch1stateObject === 'true'));\n_this.state.previousQuery=retrievedPrevQueryObject;}//} else {\n//   this.state.previousQuery = null;\n//}\nreturn _this;}_createClass(SearchApp,[{key:\"render\",value:function render(){var _this$state=this.state,value=_this$state.value,results=_this$state.results;return/*#__PURE__*/React.createElement(Form,{onKeyPress:this.handleKeyPress},/*#__PURE__*/React.createElement(Search,Object.assign({onResultSelect:this.handleResultSelect,onSearchChange:_.debounce(this.handleSearchChange,1000,{leading:true}),results:this.state.results},this.props,{style:{overflow:'visible'},icon:'chevron down',placeholder:\"Enter keyword...\",defaultValue:this.state.previousQuery})),\" \");}}]);return SearchApp;}(Component);var styleLink=document.createElement(\"link\");styleLink.rel=\"stylesheet\";styleLink.href=\"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css\";document.head.appendChild(styleLink);export default SearchApp;","map":{"version":3,"sources":["/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/src/component/SearchApp.js"],"names":["_","React","Component","Search","Form","Grid","Header","Segment","Container","List","currentValueInsideField","SearchApp","props","handleKeyPress","event","key","console","log","localStorage","setItem","searchQueryProp","handleSearchChange","value","fetch","headers","response","json","data","resultsRaw","suggestionGroups","searchSuggestions","results","map","result","title","displayText","url","setState","error","handleResultSelect","e","selectedResult","state","preventDefault","previousQuery","retrievedPrevQueryObject","getItem","debounce","leading","overflow","styleLink","document","createElement","rel","href","head","appendChild"],"mappings":"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","sourcesContent":["import _ from 'lodash'\nimport React, { Component } from 'react'\nimport { Search, Form, Grid, Header, Segment, Container, List } from 'semantic-ui-react'\n\nvar currentValueInsideField = '';\n\nclass SearchApp extends Component {\n   constructor(props) {\n      super(props);\n      this.state = { results: ['null'], selectedResult: null, previousQuery: null };\n\n      //console.log(localStorage.getItem('isThisSearchPage'));\n\n\n      //Retrieving the previous search query state from Storage\n      //console.log(window.location.href);\n      //var entireurl = window.location.href;\n      //var array = entireurl.split('?');\n      //if (array[0] === 'http://localhost:3000/search') {\n      var retrievedPrevQueryObject = localStorage.getItem('searchQuery');\n      if (retrievedPrevQueryObject == null) {\n         //console.log('Detected null');\n         this.state.previousQuery = null;\n      } else {\n         //console.log('Detected ' + (retrievedSwitch1stateObject === 'true'));\n         this.state.previousQuery = retrievedPrevQueryObject;\n\n      }\n      //} else {\n      //   this.state.previousQuery = null;\n      //}\n\n   }\n\n   handleKeyPress = (event) => {\n      if (event.key === 'Enter') {\n         console.log(currentValueInsideField);\n         localStorage.setItem('searchQuery', currentValueInsideField);\n         //this.state.previousQuery = currentValueInsideField;\n         this.props.searchQueryProp(currentValueInsideField);\n      }\n   }\n\n\n   handleSearchChange = async (event, { value }) => {\n\n      //To handle enter key press\n      currentValueInsideField = value;\n\n      try {\n         const response = await fetch(\n            `https://api.cognitive.microsoft.com/bing/v7.0/suggestions?mkt=fr-FR&q=${value}`,\n            {\n               headers: {\n                  \"Ocp-Apim-Subscription-Key\": \"d901d64eeb334505825c20a547b760ba\"\n               }\n            }\n         );\n         const data = await response.json();\n         const resultsRaw = data.suggestionGroups[0].searchSuggestions;\n         const results = resultsRaw.map(result => ({ title: result.displayText, url: result.url }));\n         this.setState({ results });\n\n\n      } catch (error) {\n\n         console.error(`Error fetching search ${value}`);\n      }\n   };\n\n   handleResultSelect = (e, { result }) => {\n      this.setState({ selectedResult: result });\n      this.state.selectedResult = result;\n      e.preventDefault();\n      localStorage.setItem('searchQuery', result.title);\n      //console.log(result.title);\n      //this.state.previousQuery = result.title;\n      this.props.searchQueryProp(result.title);\n   }\n\n   render() {\n      const { value, results } = this.state\n\n      return (\n         <Form onKeyPress={this.handleKeyPress}>\n            <Search\n               onResultSelect={this.handleResultSelect}\n               onSearchChange={_.debounce(this.handleSearchChange, 1000, {\n                  leading: true,\n               })}\n               results={this.state.results}\n               {...this.props}\n               style={{ overflow: 'visible' }}\n               icon={'chevron down'}\n               placeholder=\"Enter keyword...\"\n               defaultValue={this.state.previousQuery}\n            /> {/*Add this for persisting search query  defaultValue={this.state.previousQuery} */}\n         </Form>\n      )\n   }\n}\n\nconst styleLink = document.createElement(\"link\");\nstyleLink.rel = \"stylesheet\";\nstyleLink.href = \"https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css\";\ndocument.head.appendChild(styleLink);\n\nexport default SearchApp;"]},"metadata":{},"sourceType":"module"}