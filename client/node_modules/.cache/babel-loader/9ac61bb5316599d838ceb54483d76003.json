{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _classCallCheck from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  border-color: red;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  background: #fff;\\n  border-radius: 2px;\\n  height: 320px;\\n  margin: 0.75rem;\\n  width: 300px;\\n  box-shadow: 0.2px 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\\n  /*box-shadow: 2.5px 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.23);*/\\n  transition: all 0.3s cubic-bezier(.25,.8,.25,1);\\n  padding-top: 5px;\\n  &:hover {\\n        /*box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);*/\\n        box-shadow: 2.5px 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.23);\\n        transform: translateY(-0.5px);\\n    },\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{Component}from'react';//Cards\nimport styled from'styled-components';//Truncating Content in Cards\nimport Truncate from'react-truncate';//React Share\nimport ShareIcon from'@material-ui/icons/Share';import{EmailShareButton,FacebookShareButton,TwitterShareButton,FacebookIcon,EmailIcon,TwitterIcon}from\"react-share\";import{Modal,Button}from'react-bootstrap';//Loader Spinner\nimport{css}from\"@emotion/core\";import BounceLoader from\"react-spinners/BounceLoader\";//Expanded Card Div\nimport ExpandedCard from'./ExpandedCard';var SearchResultsPage=/*#__PURE__*/function(_Component){_inherits(SearchResultsPage,_Component);var _super=_createSuper(SearchResultsPage);function SearchResultsPage(props){var _this;_classCallCheck(this,SearchResultsPage);_this=_super.call(this,props);_this.toggleModal=function(){_this.setState({isShareModalOpen:!_this.state.isShareModalOpen});};_this.doExpand=function(id){_this.setState({cardIdentifier:id,cardExpanded:true});};_this.state={posts:[],isShareModalOpen:false,shareTitle:'',shareOrigin:'',shareURL:'',cardExpanded:false,cardIdentifier:'',expandedCardContent:{}};_this.props={currentPage:''};return _this;}_createClass(SearchResultsPage,[{key:\"truncateDate\",value:function truncateDate(dateinput){return dateinput.substring(0,10);}},{key:\"categoryHandler\",value:function categoryHandler(category){return category.toUpperCase();}},{key:\"categoryCss\",value:function categoryCss(category){category=(category||'').replace(/^\\s+|\\s+$/g,'');category=category.toUpperCase();if(category==='POLITICS'){return{backgroundColor:'#0893a1',color:'#fff',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}else if(category==='WORLD'){return{backgroundColor:'#5904f6',color:'#fff',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}else if(category==='SPORT'){return{backgroundColor:'#fcb900',color:'#000',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}else if(category==='BUSINESS'){return{backgroundColor:'#1273de',color:'#fff',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}else if(category==='TECHNOLOGY'){return{backgroundColor:'#8bc34a',color:'#000',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}else{return{backgroundColor:'#9b9b9b',color:'#fff',float:'left',paddingLeft:'2px',paddingRight:'2px',borderRadius:'2px'};}}},{key:\"imageHandler\",value:function imageHandler(url){var currentimage='';try{if(this.props.currentOrigin==='GUARDIAN'){currentimage=url.elements[0].assets[url.elements[0].assets.length-1].file;}else{var testforelements=url[0].url;for(var i=0;i<url.length;i++){if(url[i].width>600){currentimage='https://static01.nyt.com/'+url[i].url;}}for(var _i=0;_i<url.length;_i++){if(url[_i].width>2000){currentimage='https://static01.nyt.com/'+url[_i].url;}}}}catch(e){if(this.props.currentOrigin==='GUARDIAN'){currentimage='https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';}else{currentimage='https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';}}return currentimage;}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//Setting Search to true\nthis.props.searchTrueHandler();//Fetching from the NodeJS backend\nvar requiredURL='';if(this.props.currentOrigin==='GUARDIAN'){requiredURL=\"http://newswebsite.us-east-1.elasticbeanstalk.com/guardianAPISearch?searchstring=\"+this.props.location.search;fetch(requiredURL).then(function(response){return response.json();}).then(// handle the result\nfunction(result){_this2.setState({isLoaded:true,posts:result.response.results});//console.log(this.state.posts)\n},// Handle error \nfunction(error){console.log(error);_this2.setState({isLoaded:true,error:error});});}else{requiredURL=\"http://newswebsite.us-east-1.elasticbeanstalk.com/nytAPISearch?searchstring=\"+this.props.location.search;fetch(requiredURL).then(function(response){return response.json();}).then(// handle the result\nfunction(result){_this2.setState({isLoaded:true,posts:result.nyttoguardianformattedresponse});//console.log(this.state.posts)\n},// Handle error \nfunction(error){console.log(error);_this2.setState({isLoaded:true,error:error});});}}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,error=_this$state.error,isLoaded=_this$state.isLoaded,posts=_this$state.posts;//console.log(this.props);\nif(error){return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},\"Error in loading. \",/*#__PURE__*/React.createElement(\"br\",null),\" Reason: Guardian/NYT Server returned null data results \",/*#__PURE__*/React.createElement(\"br\",null),\"Please try again by clicking the same link...:)\");}else{return/*#__PURE__*/React.createElement(\"div\",null,!this.state.cardExpanded&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:'30px',color:'#697689',paddingLeft:'40px',paddingTop:'70px'}},\" Results \"),/*#__PURE__*/React.createElement(\"ul\",{style:{listStyleType:\"none\",padding:\"0\",paddingLeft:'15px'},className:this.state.cardExpanded?'hidden':''},this.state.posts.map(function(post){return/*#__PURE__*/React.createElement(\"li\",{style:{float:'left',overflow:'Hidden',paddingLeft:'10px'}},/*#__PURE__*/React.createElement(CardDiv,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:'12px',paddingLeft:'10px',paddingTop:'10px'}},/*#__PURE__*/React.createElement(\"i\",null,/*#__PURE__*/React.createElement(\"b\",{onClick:function onClick(e){return _this3.doExpand(post.id);}},/*#__PURE__*/React.createElement(Truncate,{lines:2,ellipsis:/*#__PURE__*/React.createElement(\"span\",null,\" \")},/*#__PURE__*/React.createElement(Truncate,{width:410,ellipsis:/*#__PURE__*/React.createElement(\"span\",null,\"...\",/*#__PURE__*/React.createElement(ShareIcon,{style:{fontSize:'14px',marginLeft:'10px'},onClick:function onClick(){_this3.toggleModal();_this3.setState({shareTitle:post.webTitle,shareOrigin:_this3.props.currentOrigin,shareURL:post.webUrl});}}))},post.webTitle))),/*#__PURE__*/React.createElement(ShareIcon,{style:{fontSize:'14px',marginLeft:'10px'},onClick:function onClick(){_this3.toggleModal();_this3.setState({shareTitle:post.webTitle,shareOrigin:_this3.props.currentOrigin,shareURL:post.webUrl});}}))))),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){_this3.setState({cardIdentifier:post.id});_this3.doExpand(post.id);},class:\"img-thumbnail\",src:_this3.imageHandler(post.blocks.main),style:{width:'280px',height:'180px',minWidth:'70px',margin:'10px'},alt:\"Image Is Loading...\"}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{id:\"wrapper\",onClick:function onClick(e){return _this3.doExpand(post.id);}},/*#__PURE__*/React.createElement(\"div\",{id:\"leftsearch\",style:{paddingLeft:'10px'}},_this3.truncateDate(post.webPublicationDate)),/*#__PURE__*/React.createElement(\"div\",{id:\"rightsearch\",style:{display:'flex',justifyContent:'space-around'}},/*#__PURE__*/React.createElement(\"span\",{style:_this3.categoryCss(post.sectionId)},_this3.categoryHandler(post.sectionId)))))));}))),this.state.cardExpanded&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ExpandedCard,{className:this.state.cardExpanded?'block':'hidden',currentOrigin:this.props.currentOrigin,currentCardId:this.state.cardIdentifier,isPartOfBookmarksProp:this.state.cardExpanded})),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",\"aria-labelledby\":\"example-modal-sizes-title-lg\",show:this.state.isShareModalOpen,onHide:this.toggleModal},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,{id:\"example-modal-sizes-title-lg\"},/*#__PURE__*/React.createElement(\"b\",null,this.state.shareOrigin),/*#__PURE__*/React.createElement(\"br\",null),this.state.shareTitle)),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',fontSize:'25px'}},/*#__PURE__*/React.createElement(\"b\",null,\"Share via\"),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center',display:'flex',justifyContent:'space-around'}},/*#__PURE__*/React.createElement(FacebookShareButton,{url:this.state.shareURL,hashtag:\"#CSCI_571_NewsApp\"},\" \",/*#__PURE__*/React.createElement(FacebookIcon,{size:64,round:true})),/*#__PURE__*/React.createElement(TwitterShareButton,{url:this.state.shareURL,title:\"#CSCI_571_NewsApp\"},/*#__PURE__*/React.createElement(TwitterIcon,{size:64,round:true})),/*#__PURE__*/React.createElement(EmailShareButton,{url:this.state.shareURL,subject:\"#CSCI_571_NewsApp\"},/*#__PURE__*/React.createElement(EmailIcon,{size:64,round:true}))))));}}}]);return SearchResultsPage;}(Component);var CardDiv=styled.div(_templateObject());var bounceCss=css(_templateObject2());export default SearchResultsPage;","map":{"version":3,"sources":["/Users/anandgokul/Documents/FreeVar_Local/homework8-anandgok/frontend/client/src/component/SearchResultsPage.js"],"names":["React","Component","styled","Truncate","ShareIcon","EmailShareButton","FacebookShareButton","TwitterShareButton","FacebookIcon","EmailIcon","TwitterIcon","Modal","Button","css","BounceLoader","ExpandedCard","SearchResultsPage","props","toggleModal","setState","isShareModalOpen","state","doExpand","id","cardIdentifier","cardExpanded","posts","shareTitle","shareOrigin","shareURL","expandedCardContent","currentPage","dateinput","substring","category","toUpperCase","replace","backgroundColor","color","float","paddingLeft","paddingRight","borderRadius","url","currentimage","currentOrigin","elements","assets","length","file","testforelements","i","width","e","searchTrueHandler","requiredURL","location","search","fetch","then","response","json","result","isLoaded","results","error","console","log","nyttoguardianformattedresponse","textAlign","fontSize","paddingTop","listStyleType","padding","map","post","overflow","marginLeft","webTitle","webUrl","imageHandler","blocks","main","height","minWidth","margin","truncateDate","webPublicationDate","display","justifyContent","categoryCss","sectionId","categoryHandler","CardDiv","div","bounceCss"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\n//Cards\nimport styled from 'styled-components'\n\n//Truncating Content in Cards\nimport Truncate from 'react-truncate';\n\n//React Share\nimport ShareIcon from '@material-ui/icons/Share';\nimport {\n   EmailShareButton,\n   FacebookShareButton,\n   TwitterShareButton,\n   FacebookIcon,\n   EmailIcon,\n   TwitterIcon\n} from \"react-share\";\nimport { Modal, Button } from 'react-bootstrap';\n\n//Loader Spinner\nimport { css } from \"@emotion/core\";\nimport BounceLoader from \"react-spinners/BounceLoader\";\n\n//Expanded Card Div\nimport ExpandedCard from './ExpandedCard';\n\nclass SearchResultsPage extends Component {\n   constructor(props) {\n      super(props);\n      this.state = {\n         posts: [],\n         isShareModalOpen: false,\n         shareTitle: '',\n         shareOrigin: '',\n         shareURL: '',\n         cardExpanded: false,\n         cardIdentifier: '',\n         expandedCardContent: {},\n      };\n      this.props = {\n         currentPage: '',\n      }\n\n   }\n\n   truncateDate(dateinput) {\n      return dateinput.substring(0, 10);\n   }\n\n   categoryHandler(category) {\n      return category.toUpperCase();\n   }\n\n   categoryCss(category) {\n      category = (category || '').replace(/^\\s+|\\s+$/g, '');\n      category = category.toUpperCase();\n      if (category === 'POLITICS') {\n         return { backgroundColor: '#0893a1', color: '#fff', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n      else if (category === 'WORLD') {\n         return { backgroundColor: '#5904f6', color: '#fff', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n      else if (category === 'SPORT') {\n         return { backgroundColor: '#fcb900', color: '#000', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n      else if (category === 'BUSINESS') {\n         return { backgroundColor: '#1273de', color: '#fff', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n      else if (category === 'TECHNOLOGY') {\n         return { backgroundColor: '#8bc34a', color: '#000', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n      else {\n         return { backgroundColor: '#9b9b9b', color: '#fff', float: 'left', paddingLeft: '2px', paddingRight: '2px', borderRadius: '2px' };\n      }\n   }\n\n   imageHandler(url) {\n      let currentimage = '';\n      try {\n         if (this.props.currentOrigin === 'GUARDIAN') {\n            currentimage = url.elements[0].assets[url.elements[0].assets.length - 1].file;\n         } else {\n            var testforelements = url[0].url;\n            for (let i = 0; i < url.length; i++) {\n               if (url[i].width > 600) {\n                  currentimage = 'https://static01.nyt.com/' + url[i].url;\n               }\n            }\n            for (let i = 0; i < url.length; i++) {\n               if (url[i].width > 2000) {\n                  currentimage = 'https://static01.nyt.com/' + url[i].url;\n               }\n            }\n\n         }\n      } catch (e) {\n         if (this.props.currentOrigin === 'GUARDIAN') {\n            currentimage = 'https://assets.guim.co.uk/images/eada8aa27c12fe2d5afa3a89d3fbae0d/fallback-logo.png';\n         } else {\n            currentimage = 'https://upload.wikimedia.org/wikipedia/commons/0/0e/Nytimes_hq.jpg';\n         }\n      }\n      return currentimage;\n   }\n\n   toggleModal = () => {\n      this.setState({\n         isShareModalOpen: !this.state.isShareModalOpen\n      });\n   }\n\n   doExpand = id => {\n      this.setState({\n         cardIdentifier: id,\n         cardExpanded: true,\n      });\n   }\n\n   componentDidMount() {\n      //Setting Search to true\n      this.props.searchTrueHandler();\n\n      //Fetching from the NodeJS backend\n      let requiredURL = '';\n      if (this.props.currentOrigin === 'GUARDIAN') {\n         requiredURL = \"http://newswebsite.us-east-1.elasticbeanstalk.com/guardianAPISearch?searchstring=\" + this.props.location.search;\n         fetch(requiredURL)\n            .then(response => response.json())\n            .then(\n               // handle the result\n               (result) => {\n                  this.setState({\n                     isLoaded: true,\n                     posts: result.response.results\n                  });\n                  //console.log(this.state.posts)\n               },\n\n               // Handle error \n               (error) => {\n                  console.log(error);\n                  this.setState({\n                     isLoaded: true,\n                     error\n                  })\n               },\n            )\n      } else {\n         requiredURL = \"http://newswebsite.us-east-1.elasticbeanstalk.com/nytAPISearch?searchstring=\" + this.props.location.search;\n         fetch(requiredURL)\n            .then(response => response.json())\n            .then(\n               // handle the result\n               (result) => {\n                  this.setState({\n                     isLoaded: true,\n                     posts: result.nyttoguardianformattedresponse\n                  });\n                  //console.log(this.state.posts)\n               },\n\n               // Handle error \n               (error) => {\n                  console.log(error);\n                  this.setState({\n                     isLoaded: true,\n                     error\n                  })\n               },\n            )\n      }\n   }\n\n   render() {\n\n      const { error, isLoaded, posts } = this.state;\n\n      //console.log(this.props);\n\n      if (error) {\n         return <div style={{ textAlign: 'center' }}>Error in loading. <br /> Reason: Guardian/NYT Server returned null data results <br />Please try again by clicking the same link...:)</div >\n      } else {\n         return (\n            <div>\n               {!this.state.cardExpanded &&\n                  <>\n                     <br />\n                     <span style={{ fontSize: '30px', color: '#697689', paddingLeft: '40px', paddingTop: '70px' }}> Results </span>\n                     <ul style={{ listStyleType: \"none\", padding: \"0\", paddingLeft: '15px' }} className={this.state.cardExpanded ? 'hidden' : ''}>\n                        {\n                           this.state.posts.map(post => (\n                              <li style={{ float: 'left', overflow: 'Hidden', paddingLeft: '10px' }}>\n                                 <CardDiv>\n                                    <div>\n                                       <div>\n                                          <p style={{ fontSize: '12px', paddingLeft: '10px', paddingTop: '10px' }}><i>\n                                             <b onClick={e => this.doExpand(post.id)}>\n                                                <Truncate lines={2} ellipsis={<span> </span>}>\n                                                   <Truncate width={410} ellipsis={<span>\n                                                      ...\n                                                      <ShareIcon style={{ fontSize: '14px', marginLeft: '10px' }} onClick={() => {\n                                                         this.toggleModal();\n                                                         this.setState({\n                                                            shareTitle: post.webTitle,\n                                                            shareOrigin: this.props.currentOrigin,\n                                                            shareURL: post.webUrl\n                                                         });\n                                                      }} />\n\n                                                   </span>}>\n                                                      {post.webTitle}\n                                                   </Truncate>\n                                                </Truncate>\n\n                                             </b>\n                                             <ShareIcon style={{ fontSize: '14px', marginLeft: '10px' }} onClick={() => {\n                                                this.toggleModal();\n                                                this.setState({\n                                                   shareTitle: post.webTitle,\n                                                   shareOrigin: this.props.currentOrigin,\n                                                   shareURL: post.webUrl\n                                                });\n                                             }} />\n                                          </i></p>\n                                       </div>\n                                    </div>\n                                    <img onClick={() => { this.setState({ cardIdentifier: post.id }); this.doExpand(post.id); }} class=\"img-thumbnail\" src={this.imageHandler(post.blocks.main)} style={{ width: '280px', height: '180px', minWidth: '70px', margin: '10px' }} alt=\"Image Is Loading...\" />\n\n\n                                    <div>\n                                       <div id='wrapper' onClick={e => this.doExpand(post.id)} >\n                                          <div id=\"leftsearch\" style={{ paddingLeft: '10px' }}>{this.truncateDate(post.webPublicationDate)}</div>\n                                          <div id=\"rightsearch\" style={{ display: 'flex', justifyContent: 'space-around', }}>\n                                             <span style={this.categoryCss(post.sectionId)}>{this.categoryHandler(post.sectionId)}</span>\n                                          </div>\n                                       </div>\n                                    </div>\n\n\n                                 </CardDiv>\n\n                              </li>\n                           ))\n                        }\n                     </ul>\n                  </>\n               }\n\n               {\n                  this.state.cardExpanded &&\n                  <div>\n                     <ExpandedCard className={this.state.cardExpanded ? 'block' : 'hidden'} currentOrigin={this.props.currentOrigin} currentCardId={this.state.cardIdentifier} isPartOfBookmarksProp={this.state.cardExpanded} />\n                  </div>\n               }\n\n               <Modal size=\"lg\" aria-labelledby=\"example-modal-sizes-title-lg\" show={this.state.isShareModalOpen} onHide={this.toggleModal}>\n                  <Modal.Header closeButton>\n                     <Modal.Title id=\"example-modal-sizes-title-lg\" ><b>{this.state.shareOrigin}</b><br />{this.state.shareTitle}</Modal.Title>\n                  </Modal.Header>\n                  <Modal.Body>\n                     <div style={{ textAlign: 'center', fontSize: '25px' }}><b>Share via</b><br /></div>\n                     <div style={{ textAlign: 'center', display: 'flex', justifyContent: 'space-around' }}>\n                        <FacebookShareButton url={this.state.shareURL} hashtag='#CSCI_571_NewsApp' > <FacebookIcon size={64} round={true} /></FacebookShareButton>\n                        <TwitterShareButton url={this.state.shareURL} title='#CSCI_571_NewsApp'><TwitterIcon size={64} round={true} /></TwitterShareButton>\n                        <EmailShareButton url={this.state.shareURL} subject='#CSCI_571_NewsApp'><EmailIcon size={64} round={true} /></EmailShareButton>\n                     </div>\n                  </Modal.Body>\n               </Modal>\n\n            </div >\n         );\n      }\n   }\n}\n\n\nconst CardDiv = styled.div`\n  background: #fff;\n  border-radius: 2px;\n  height: 320px;\n  margin: 0.75rem;\n  width: 300px;\n  box-shadow: 0.2px 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n  /*box-shadow: 2.5px 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.23);*/\n  transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n  padding-top: 5px;\n  &:hover {\n        /*box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);*/\n        box-shadow: 2.5px 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.23);\n        transform: translateY(-0.5px);\n    },\n`;\n\nconst bounceCss = css`\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n`;\n\nexport default SearchResultsPage;"]},"metadata":{},"sourceType":"module"}